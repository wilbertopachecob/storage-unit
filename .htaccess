# Redirect all requests to public directory
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ /public/$1 [L,QSA]

# Security: Prevent access to sensitive directories
RedirectMatch 403 ^/app/
RedirectMatch 403 ^/config/
RedirectMatch 403 ^/routes/
RedirectMatch 403 ^/scripts/
RedirectMatch 403 ^/storage/
RedirectMatch 403 ^/tests/
RedirectMatch 403 ^/vendor/
RedirectMatch 403 ^/\.git/

# Security: Prevent access to sensitive files
<FilesMatch "\.(env|log|sql|md|sh|yml|yaml|json|lock)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>
